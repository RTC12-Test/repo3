name: test
on:
 push:
   push:
    branches: ["main"]

  # workflow_call:
  #   inputs:
  #     github_pat:
  #       description: 'aws service'
  #       type: string
  #       required: true
  #     task_definition:
  #       type: string
  #       description: 'aws task'
  #       required: true
  #     cluster:
  #       description: 'aws cluster'
  #       type: string
  #       required: true

permissions:
  id-token: write   # This is required for requesting the JWT
  contents: read  
  
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
       - name: Configure AWS credentials
         uses: aws-actions/configure-aws-credentials@v4
         with:
             aws-region: "us-east-1"
             role-to-assume: "arn:aws:iam::677276076781:role/odic"
             role-session-name: "hello"
             

       - name: Get secrets by name and by ARN
         uses: aws-actions/aws-secretsmanager-get-secrets@v2
         with:
          secret-ids: |
             hello,arn:aws:secretsmanager:us-east-1:677276076781:secret:rtcek-sso-dev-secret-manager-LswlhN
          name-transformation: lowercase


       - name: Output secrets 
         run: |
           echo ${{ env.hello }}

           
